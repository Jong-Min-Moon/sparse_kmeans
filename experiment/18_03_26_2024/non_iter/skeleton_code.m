for rep = 1:100
    rng(rep)
    x_noisy = x_noiseless +  mvnrnd(zero_mean, Sigma, n)';%data generation. each column is one observation

    fprintf("replication: (%i)th \n\n", rep)
    [cluster_est, diff_x_tilde, diff_omega_diag, omega_est_time, sdp_solve_time, obj_val_prim, obj_val_dual] = non_iter_kmeans(x_noisy, K,  Omega,  'spec');
    acc_vec = get_acc(cluster_est, cluster_true);
    fprintf( strcat( "acc =", join(repelem("%f ", length(acc_vec))), "\n"),  acc_vec );



    import java.util.TimeZone 
    nn = now;
    ds = datestr(nn);
    dt = datetime(ds,'TimeZone',char(TimeZone.getDefault().getID()));
    data = table(...
        rep,...
        Delta,...
        p,...
        rho,...
        s,...
        acc_vec,...
        obj_val_prim,...
        obj_val_dual,...
        diff_x_tilde,...
        diff_omega_diag,...
        omega_est_time,...
        sdp_solve_time,...
        dt,'VariableNames', ...
        ["rep", "sep", "dim", "rho", "sparsity", "acc", "obj_prim", "obj_dual", "diff_x_tilde", "diff_omega_diag",  "time_isee", "time_SDP", "jobdate"])
        waittime = randi([5,20]);
        pause(waittime);
        conn=sqlite('/home1/jongminm/sparse_kmeans/sparse_kmeans.db')
        pause(2);
        sqlwrite(conn, table_name, data)
        pause(2);
        close(conn)
end


